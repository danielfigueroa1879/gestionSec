<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Seguridad</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sección de Inicio -->
        <section id="home" class="section active">
            <header class="header">
                <h1>Bienvenido al Sistema de Gestión de Seguridad</h1>
                <p>Gestiona eficientemente estudios, planes, medidas y directivas de seguridad.</p>
            </header>

            <div class="main-menu">
                <div class="menu-card estudios" onclick="showSection('estudios')">
                    <div class="icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>Estudios de Seguridad</h3>
                    <p>Análisis detallado de riesgos y vulnerabilidades.</p>
                    <span class="count" id="estudios-count">0 registros</span>
                </div>

                <div class="menu-card planes" onclick="showSection('planes')">
                    <div class="icon"><i class="fas fa-file-alt"></i></div>
                    <h3>Planes de Seguridad</h3>
                    <p>Estrategias y procedimientos para la prevención y respuesta.</p>
                    <span class="count" id="planes-count">0 registros</span>
                </div>

                <div class="menu-card medidas" onclick="showSection('medidas')">
                    <div class="icon"><i class="fas fa-lock"></i></div>
                    <h3>Medidas de Seguridad</h3>
                    <p>Implementación de acciones preventivas y correctivas.</p>
                    <span class="count" id="medidas-count">0 registros</span>
                </div>

                <div class="menu-card directivas" onclick="showSection('directivas')">
                    <div class="icon"><i class="fas fa-book"></i></div>
                    <h3>Directivas de Funcionamiento</h3>
                    <p>Normativas y lineamientos operativos para la seguridad.</p>
                    <span class="count" id="directivas-count">0 registros</span>
                </div>
            </div>
        </section>

        <!-- Sección de Estudios de Seguridad -->
        <section id="estudios" class="section">
            <header class="section-header">
                <h2 class="section-title estudios">Estudios de Seguridad</h2>
                <button class="btn btn-secondary" onclick="showHome()">Volver al Inicio</button>
            </header>
            
            <nav class="section-nav">
                <button class="btn tab-btn active estudios" onclick="showTab('estudios', 'consultar')">Consultar Estudios</button>
                <button class="btn tab-btn estudios" onclick="showTab('estudios', 'agregar')">Agregar Estudio</button>
            </nav>

            <div id="estudios-consultar" class="tab-content active">
                <div class="search-container">
                    <input type="text" id="estudios-search" class="search-input" placeholder="Buscar estudio por código, tipo, responsable...">
                    <button class="btn estudios" onclick="searchData('estudios', document.getElementById('estudios-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadData('estudios')">Mostrar Todos</button>
                </div>
                <div id="estudios-results"></div>
            </div>

            <div id="estudios-agregar" class="tab-content">
                <form onsubmit="addRecord('estudios', event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="estudio-codigo">Código:</label>
                            <input type="text" id="estudio-codigo" required>
                        </div>
                        <div class="form-group">
                            <label for="estudio-tipo">Tipo de Estudio:</label>
                            <input type="text" id="estudio-tipo" required>
                        </div>
                        <div class="form-group">
                            <label for="estudio-fechaInicio">Fecha de Aprobación:</label>
                            <input type="date" id="estudio-fechaInicio" required>
                        </div>
                        <div class="form-group">
                            <label for="estudio-rut">R.U.T:</label>
                            <input type="text" id="estudio-rut">
                        </div>
                        <div class="form-group">
                            <label for="estudio-direccion">Dirección:</label>
                            <input type="text" id="estudio-direccion">
                        </div>
                        <div class="form-group">
                            <label for="estudio-comuna">Comuna:</label>
                            <input type="text" id="estudio-comuna">
                        </div>
                    </div>
                    <button type="submit" class="btn estudios">Agregar Estudio</button>
                </form>
            </div>
        </section>

        <!-- Sección de Planes de Seguridad -->
        <section id="planes" class="section">
            <header class="section-header">
                <h2 class="section-title planes">Planes de Seguridad</h2>
                <button class="btn btn-secondary" onclick="showHome()">Volver al Inicio</button>
            </header>
            
            <nav class="section-nav">
                <button class="btn tab-btn active planes" onclick="showTab('planes', 'consultar')">Consultar Planes</button>
                <button class="btn tab-btn planes" onclick="showTab('planes', 'agregar')">Agregar Plan</button>
            </nav>

            <div id="planes-consultar" class="tab-content active">
                <div class="search-container">
                    <input type="text" id="planes-search" class="search-input" placeholder="Buscar plan por código, tipo, objetivo...">
                    <button class="btn planes" onclick="searchData('planes', document.getElementById('planes-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadData('planes')">Mostrar Todos</button>
                </div>
                <div id="planes-results"></div>
            </div>

            <div id="planes-agregar" class="tab-content">
                <form onsubmit="addRecord('planes', event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="plan-codigo">Código:</label>
                            <input type="text" id="plan-codigo" required>
                        </div>
                        <div class="form-group">
                            <label for="plan-tipo">Tipo de Plan:</label>
                            <input type="text" id="plan-tipo" required>
                        </div>
                        <div class="form-group">
                            <label for="plan-fechaAprobacion">Fecha de Aprobación:</label>
                            <input type="date" id="plan-fechaAprobacion" required>
                        </div>
                        <div class="form-group">
                            <label for="plan-rut">R.U.T:</label>
                            <input type="text" id="plan-rut">
                        </div>
                        <div class="form-group">
                            <label for="plan-revision">Dirección:</label>
                            <input type="text" id="plan-revision">
                        </div>
                        <div class="form-group">
                            <label for="plan-comuna">Comuna:</label>
                            <input type="text" id="plan-comuna">
                        </div>
                    </div>
                    <button type="submit" class="btn planes">Agregar Plan</button>
                </form>
            </div>
        </section>

        <!-- Sección de Medidas de Seguridad -->
        <section id="medidas" class="section">
            <header class="section-header">
                <h2 class="section-title medidas">Medidas de Seguridad</h2>
                <button class="btn btn-secondary" onclick="showHome()">Volver al Inicio</button>
            </header>
            
            <nav class="section-nav">
                <button class="btn tab-btn active medidas" onclick="showTab('medidas', 'consultar')">Consultar Medidas</button>
                <button class="btn tab-btn medidas" onclick="showTab('medidas', 'agregar')">Agregar Medida</button>
            </nav>

            <div id="medidas-consultar" class="tab-content active">
                <div class="medidas-menu-buttons">
                    <button class="btn medidas" onclick="showRecords('medidas')">Medidas Generales</button>
                    <button class="btn medidas" onclick="showRecords('servicentros')">Servicentros (<span id="servicentros-count-sub">0</span>)</button>
                    <button class="btn medidas" onclick="showRecords('sobre-500-uf')">Sobre 500 UF (<span id="sobre-500-uf-count-sub">0</span>)</button>
                </div>
                
                <!-- Contenedor para la lista de Medidas Generales (oculto por defecto) -->
                <div id="medidas-records" class="medidas-sub-section-records">
                    <div class="search-container">
                        <input type="text" id="medidas-generales-search" class="search-input" placeholder="Buscar medida general por código, categoría...">
                        <button class="btn medidas" onclick="searchData('medidas', document.getElementById('medidas-generales-search').value)">Buscar</button>
                        <button class="btn btn-secondary" onclick="loadData('medidas')">Mostrar Todas</button>
                        <button class="btn btn-secondary" onclick="backToMedidasConsultar()">Volver a Opciones</button>
                    </div>
                    <div id="medidas-results"></div>
                </div>

                <!-- Contenedor para la lista de Servicentros (oculto por defecto) -->
                <div id="servicentros-records" class="medidas-sub-section-records">
                    <div class="search-container">
                        <input type="text" id="servicentros-search" class="search-input" placeholder="Buscar servicentro por código, tipo, dirección...">
                        <button class="btn medidas" onclick="searchData('servicentros', document.getElementById('servicentros-search').value)">Buscar</button>
                        <button class="btn btn-secondary" onclick="loadData('servicentros')">Mostrar Todos</button>
                        <button class="btn btn-secondary" onclick="backToMedidasConsultar()">Volver a Opciones</button>
                    </div>
                    <div id="servicentros-results"></div>
                </div>

                <!-- Contenedor para la lista de Sobre 500 UF (oculto por defecto) -->
                <div id="sobre-500-uf-records" class="medidas-sub-section-records">
                    <div class="search-container">
                        <input type="text" id="sobre-500-uf-search" class="search-input" placeholder="Buscar por código, descripción, responsable...">
                        <button class="btn medidas" onclick="searchData('sobre-500-uf', document.getElementById('sobre-500-uf-search').value)">Buscar</button>
                        <button class="btn btn-secondary" onclick="loadData('sobre-500-uf')">Mostrar Todos</button>
                        <button class="btn btn-secondary" onclick="backToMedidasConsultar()">Volver a Opciones</button>
                    </div>
                    <div id="sobre-500-uf-results"></div>
                </div>
            </div>

            <div id="medidas-agregar" class="tab-content">
                <form onsubmit="addRecord('medidas', event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="medida-codigo">Código:</label>
                            <input type="text" id="medida-codigo" required>
                        </div>
                        <div class="form-group">
                            <label for="medida-categoria">Categoría (Entidad):</label>
                            <input type="text" id="medida-categoria" required>
                        </div>
                        <div class="form-group">
                            <label for="medida-fechaAprobacion">Fecha de Aprobación:</label>
                            <input type="date" id="medida-fechaAprobacion" required>
                        </div>
                        <div class="form-group">
                            <label for="medida-rut">R.U.T:</label>
                            <input type="text" id="medida-rut">
                        </div>
                        <div class="form-group">
                            <label for="medida-direccion">Dirección:</label>
                            <input type="text" id="medida-direccion">
                        </div>
                        <div class="form-group">
                            <label for="medida-comuna">Comuna:</label>
                            <input type="text" id="medida-comuna">
                        </div>
                    </div>
                    <button type="submit" class="btn medidas">Agregar Medida</button>
                </form>
            </div>
        </section>

        <!-- Sección de Directivas de Funcionamiento -->
        <section id="directivas" class="section">
            <header class="section-header">
                <h2 class="section-title directivas">Directivas de Funcionamiento</h2>
                <button class="btn btn-secondary" onclick="showHome()">Volver al Inicio</button>
            </header>
            
            <nav class="section-nav">
                <button class="btn tab-btn active directivas" onclick="showTab('directivas', 'consultar')">Consultar Directivas</button>
                <button class="btn tab-btn directivas" onclick="showTab('directivas', 'agregar')">Agregar Directiva</button>
            </nav>

            <div id="directivas-consultar" class="tab-content active">
                <div class="medidas-menu-buttons">
                    <button class="btn directivas" onclick="showDirectivasSubSection('empresas-rrhh')">Empresas de RRHH</button>
                    <button class="btn directivas" onclick="showDirectivasSubSection('guardias-propios')">Guardias Propios</button>
                    <button class="btn directivas" onclick="showDirectivasSubSection('eventos-masivos')">Eventos Masivos</button>
                    <button class="btn directivas" onclick="showDirectivasSubSection('directivas-generales')">Directivas Generales</button>
                </div>
            </div>
            
            <!-- Subsecciones de Directivas -->
            <div id="directivas-empresas-rrhh-list" class="tab-content">
                <header class="section-header">
                    <h3 class="section-title directivas" id="empresas-rrhh-list-title"></h3>
                    <button class="btn btn-secondary" onclick="backToDirectivasMain()">Volver a Directivas</button>
                </header>
                <div class="search-container">
                    <input type="text" id="empresas-rrhh-search" class="search-input" placeholder="Buscar empresa por nombre o RUT...">
                    <button class="btn directivas" onclick="searchEmpresasRRHH(document.getElementById('empresas-rrhh-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="renderEmpresasRRHHList()">Mostrar Todas</button>
                </div>
                <div id="empresas-rrhh-results"></div>
            </div>

            <div id="directivas-empresa-specific-details" class="tab-content">
                <header class="section-header">
                    <h3 class="section-title directivas" id="empresa-specific-details-title"></h3>
                    <button class="btn btn-secondary" onclick="backToEmpresasList()">Volver a Lista de Empresas</button>
                </header>
                <div class="search-container">
                    <input type="text" id="empresa-details-search" class="search-input" placeholder="Buscar directiva por código, tipo, dirección...">
                    <button class="btn directivas" onclick="searchCompanySpecificDirectivas(document.getElementById('empresa-details-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadCompanySpecificDirectivas(currentEmpresaSelected)">Mostrar Todas</button>
                </div>
                <div id="empresa-specific-details-results"></div>
            </div>

            <div id="directivas-guardias-propios-list" class="tab-content">
                <header class="section-header">
                    <h3 class="section-title directivas" id="guardias-propios-list-title"></h3>
                    <button class="btn btn-secondary" onclick="backToDirectivasMain()">Volver a Directivas</button>
                </header>
                <div class="search-container">
                    <input type="text" id="guardias-propios-search" class="search-input" placeholder="Buscar guardia por número, tipo de servicio...">
                    <button class="btn directivas" onclick="searchData('guardias-propios', document.getElementById('guardias-propios-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadData('guardias-propios')">Mostrar Todos</button>
                </div>
                <div id="guardias-propios-results"></div>
            </div>

            <div id="directivas-eventos-masivos-list" class="tab-content">
                <header class="section-header">
                    <h3 class="section-title directivas" id="eventos-masivos-list-title"></h3>
                    <button class="btn btn-secondary" onclick="backToDirectivasMain()">Volver a Directivas</button>
                </header>
                <div class="search-container">
                    <input type="text" id="eventos-masivos-search" class="search-input" placeholder="Buscar evento por nombre, fecha, dirección...">
                    <button class="btn directivas" onclick="searchData('eventos-masivos', document.getElementById('eventos-masivos-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadData('eventos-masivos')">Mostrar Todos</button>
                </div>
                <div id="eventos-masivos-results"></div>
            </div>

            <div id="directivas-generales-list" class="tab-content">
                <header class="section-header">
                    <h3 class="section-title directivas" id="directivas-generales-list-title"></h3>
                    <button class="btn btn-secondary" onclick="backToDirectivasMain()">Volver a Directivas</button>
                </header>
                <div class="search-container">
                    <input type="text" id="directivas-generales-search" class="search-input" placeholder="Buscar directiva por número, área, título...">
                    <button class="btn directivas" onclick="searchData('directivas-generales', document.getElementById('directivas-generales-search').value)">Buscar</button>
                    <button class="btn btn-secondary" onclick="loadData('directivas-generales')">Mostrar Todos</button>
                </div>
                <div id="directivas-generales-results"></div>
            </div>

            <div id="directivas-agregar" class="tab-content">
                <form onsubmit="addRecord('directivas', event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="directiva-numero">Código:</label>
                            <input type="text" id="directiva-numero" required>
                        </div>
                        <div class="form-group">
                            <label for="directiva-area">Área (Entidad):</label>
                            <input type="text" id="directiva-area" required>
                        </div>
                        <div class="form-group">
                            <label for="directiva-fecha">Fecha de Aprobación:</label>
                            <input type="date" id="directiva-fecha" required>
                        </div>
                        <div class="form-group">
                            <label for="directiva-rut">R.U.T:</label>
                            <input type="text" id="directiva-rut">
                        </div>
                        <div class="form-group">
                            <label for="directiva-direccion">Dirección:</label>
                            <input type="text" id="directiva-direccion">
                        </div>
                        <div class="form-group">
                            <label for="directiva-comuna">Comuna:</label>
                            <input type="text" id="directiva-comuna">
                        </div>
                    </div>
                    <button type="submit" class="btn directivas">Agregar Directiva</button>
                </form>
            </div>
        </section>

        <!-- Modal de Detalles -->
        <div id="detailModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle"></h2>
                    <span class="close" onclick="closeModal()">&times;</span>
                </div>
                <div class="detail-grid" id="modalBody">
                    <!-- Los detalles del registro se insertarán aquí -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
